# Техническое задание

## Назначение бота

Зашита Telegram сообщества (группы) от спамеров, несанкционированной и некорректной рекламы. Бережем внимание людей!

## Полномочия бота

- Получает нотификации о новых пользователях.
- Получает нотификации о новых сообщениях. 
- Может писать сообщения в группу. 
- Может удалять сообщения из группы.
- Может удалять участников из группы на сутки.

## Основные фукции бота

### Бот проверяет новых участников группы

После добавления нового участника группы бот проводит проверку участника следующим образом:
- в группу отправляется сообщение с именем нового пользователя (обращением к нему) и задачкой типа Quiz (описание ниже);
- бот в течении 1 минуты ждет текстовое сообщение от нового пользователя с текстовым ответом на эту задачку, если сообющение не поступило - бот кикает пользователя;
- cообщение с задачкой также удаляется;
- все сообщения кикнутого пользователя также удаляются из группы.

#### Варианты Quiz

##### математический
- напишите год, который получается, если вычесть из текущего года число 3 (рандом от 1 до 10).

##### позиционный
- напишите букву на 5 позиции в слове symposium

##### против chatGPT

(chatGPT может отвечать на текстовые задачки - надо придумать, как этому противостоять)

**TBD**

### Бот анализирует сообщения

Бот анализирует все сообщения на предмет спама и вежливо удаляет.

"вежливо удаляет" это означает, что бот посылает в ответ на сообщение пользователя предупреждение (также сообщение в группе), что через 1 минуту сообщение будет удалено.
Если сообщение не исправлено, то оно удалется ботом (также как и сообщение-предупреждение).

Спам - это сообщение, содержащее стоп-слова (списк слов может пополняться, текстовый), либо сообщение на котором есть реакция "finger-down" в количестве 5 и более штук.


## Технические особенности реализации

Должна присутствовать главная функция для входящих сообщений от Telegram: **processTgMessage(httpRequest)**

Должны присутствовать модельные классы (DTO) с явными полями для запросов и ответов между функцими и классами приложения бота. То есть формирование и парсинг JSON только на входе и при ответе в Telegram.

Взаимодействие с Telegram должно быть описано через java interface (например, TgApiService) и логика бота должна вызывать методы этого интерфейса.

У бота должны быть точки расширения - для добавления новых текстовых задачек на валидацию пользователя, новых проверок текста на спам (паттерн Strategy).

Таймеры (запуск/отмена), хранение данных (хранение состояния) также должно иметь свои интерфейсы и реализации.

При реализации следует применять минималистичный подход - использовать минимум библиотек. 
Например, логирование также должно быть за простым интерфейсом (простые вызовы logger.info(message), без параметризации и дополнительных настроек).










